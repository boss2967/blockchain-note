# 重定向和转发的区别



redirect  | tplname
--------- | ---------
浏览器端的请求 | 服务器的功能
浏览器再次发送请求| 浏览器没有再次发送请求
地址改变|地址不变
不能传递数据|传递数据

假设你去办理某个执照:

**重定向：**你先去了A局，A局的人说：“这个事情不归我们管，去B局”，然后，你就从A退了出来，自己乘车去了B局。 

**转发：**你先去了A局，A局看了以后，知道这个事情其实应该B局来管，但是他没有把你退回来，而是让你坐一会儿，自己到后面办公室联系了B的人，让他们办好后，送了过来。

# Gestring能获取3种数据

1. 正则路由传递的数据
2. post
3. get

# form上传文件
`enctype="multipart/form-data`
给form加上这句话才是真上传

# 正则路由设置
为了用户更加方便的路由设置，beego支持多种方式的路由
## 默认匹配 
```
beego.Router(“/api/?:id”, &controllers.RController{})
beego.Router(“/api/:id”, &controllers.RController{})//匹配/api/失败
```
## 自定义正则匹配：
```
beego.Router(“/api/:id([0-9]+)“, &controllers.RController{})//数字
beego.Router(“/user/:username([\\w]+)“, &controllers.RController{})//字母
beego.Router(“/download/*.*”, &controllers.RController{})//匹配文件
```

## path和ext:
`/download/file/api.xml`匹配出来: `path`值为`file/api`,:`ext`值为`xml`, : `path`和:`ext`名称是固定的不能改变

```
beego.Router(“/download/ceshi/*“, &controllers.RController{})//全匹配方式
```
例如`/download/ceshi/file/api.json`匹配出来:`splat`值为”file/api.json” :`splat`名称也不能变

# ORM操作：
安装Orm

```
go get github.com/astaxie/beego/orm
```
*	连接

	```
	// 设置数据库基本信息
	orm.RegisterDataBase("default", "mysql", "root:123456@tcp(127.0.0.1:3306)/test1?charset=utf8")     
	// 映射model数据
	orm.RegisterModel(new(Book))
	// 生成表
	orm.RunSyncdb("default", false, true)
	```
*	增
	
	```
	id, err := o.Insert(&user)
	```
*  	删

	```
	num, err := o.Delete(&User{Id: 1}); 
	```
*  	改

	```
	num, err := o.Update(&user);
	```
*  	查

	```
	user := User{Id: 1}
	err := o.Read(&user)
	```
	或者
	
	```
	user := User{Name: "slene"}
	err = o.Read(&user, "Name")
	```
	All 方法：返回对应的结果集对象
	
	```
	var users []*User
num, err := o.QueryTable("user").All(&users)
	```
	One：尝试返回单条记录
	
	```
	err := o.QueryTable("user").One(&user)
	if err == orm.ErrMultiRows {
		// 多条的时候报错
		fmt.Printf("Returned Multi Rows Not One")
	}
	if err == orm.ErrNoRows {
		// 没有找到记录
		fmt.Printf("Not row found")
	}
	```
	
	OrderBy：根据某一属性进行排序,默认递增，加上-后是递减
	
	```
	var users []*User
	num, err := o.QueryTable("user").OrderBy("id", "-profile__age").All(&users)
	fmt.Printf("Returned Rows Num: %s, %s", num, err)
	```

# 列表数据是视图中的展示

*	循环一
	
	```
	{{range .Pages}}
   		{{.Num}} of {{$.Total}}
{{end}}
	```
	使用 .Num 输出子元素的 Num 属性，使用 $. 引用模板中的根级上下文

*	循环二

	```
	{{range $index, $elem := .Pages}}
    	{{$index}} - {{$elem.Num}} - {{.Num}} of {{$.Total}}
{{end}}
	```
	range 循环内部的 .  为以上类型的子元素
对应的值长度为 0 时，range 不会执行， . 不会改变<!---->